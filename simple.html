<!DOCTYPE html>
<html>
<head>
    <title>Simple Inventory System</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
        .container { margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        .input { width: 100%; padding: 8px; }
        .button { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        .forecast { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px; }
        .result { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Simple Inventory System</h1>
    
    <div class="container">
        <h2>Add Product</h2>
        <form id="productForm">
            <div class="form-group">
                <input type="text" id="productId" class="input" placeholder="Product ID" required>
            </div>
            <div class="form-group">
                <input type="text" id="productName" class="input" placeholder="Product Name" required>
            </div>
            <div class="form-group">
                <input type="number" id="shelfLife" class="input" placeholder="Shelf Life (days)" required>
            </div>
            <button type="submit" class="button">Add Product</button>
        </form>
    </div>

    <div class="container">
        <h2>Add Sales</h2>
        <form id="salesForm">
            <div class="form-group">
                <input type="text" id="salesProductId" class="input" placeholder="Product ID" required>
            </div>
            <div class="form-group">
                <input type="date" id="salesDate" class="input" required>
            </div>
            <div class="form-group">
                <input type="number" id="quantity" class="input" placeholder="Quantity" required>
            </div>
            <button type="submit" class="button">Add Sales</button>
        </form>
    </div>

    <div class="container">
        <h2>Generate Forecast</h2>
        <form id="forecastForm">
            <div class="form-group">
                <input type="text" id="forecastProductId" class="input" placeholder="Product ID" required>
            </div>
            <div class="form-group">
                <input type="number" id="forecastDays" class="input" placeholder="Days to Forecast" required>
            </div>
            <button type="submit" class="button">Generate Forecast</button>
        </form>
    </div>

    <div id="forecastResults" class="forecast" style="display: none;">
        <h3>Forecast Results</h3>
        <div id="results"></div>
    </div>

    <script>
        // Add Product
        document.getElementById('productForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const product = {
                id: document.getElementById('productId').value,
                name: document.getElementById('productName').value,
                shelf_life_days: parseInt(document.getElementById('shelfLife').value)
            };
            
            try {
                const response = await fetch('http://localhost:8000/add-product/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(product)
                });
                alert('Product added successfully!');
                e.target.reset();
            } catch (error) {
                alert('Error adding product');
            }
        });

        // Add Sales
        document.getElementById('salesForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const sales = {
                product_id: document.getElementById('salesProductId').value,
                date: document.getElementById('salesDate').value,
                quantity: parseInt(document.getElementById('quantity').value)
            };
            
            try {
                const response = await fetch('http://localhost:8000/add-sales/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(sales)
                });
                alert('Sales data added successfully!');
                e.target.reset();
            } catch (error) {
                alert('Error adding sales data');
            }
        });

        // Generate Forecast
        document.getElementById('forecastForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const forecast = {
                product_id: document.getElementById('forecastProductId').value,
                days: parseInt(document.getElementById('forecastDays').value)
            };
            
            try {
                const response = await fetch('http://localhost:8000/forecast/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(forecast)
                });
                const data = await response.json();
                
                const resultsDiv = document.getElementById('results');
                resultsDiv.innerHTML = '';
                
                data.dates.forEach((date, index) => {
                    const result = document.createElement('div');
                    result.className = 'result';
                    result.innerHTML = `
                        <strong>${date}</strong><br>
                        Predicted Sales: ${data.predicted_sales[index]} units<br>
                        Recommended Order: ${data.recommended_order[index]} units
                    `;
                    resultsDiv.appendChild(result);
                });
                
                document.getElementById('forecastResults').style.display = 'block';
            } catch (error) {
                alert('Error generating forecast');
            }
        });
    </script>
</body>
</html>
